{
    "has_issue": false,
    "overall_severity": "",
    "issues": [],
    "fixed_code": "\u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e\n\u003c!DOCTYPE mapper\n        PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"\u003e\n\u003cmapper namespace=\"com.bdqn.dao.MenuMapper\"\u003e\n\n    \u003c!-- 查询所有菜单列表 --\u003e\n    \u003cselect id=\"findMenuList\" resultType=\"com.bdqn.entity.Menu\"\u003e\n        select * from sys_menu\n    \u003c/select\u003e\n\n\n    \u003cselect id=\"findMenuIdListByRoleId\" resultType=\"int\"\u003e\n        select mid from sys_role_menu where rid = #{roleId}\n    \u003c/select\u003e\n\n    \u003cselect id=\"findMenuByMenuId\" resultType=\"com.bdqn.entity.Menu\"\u003e\n        select * from sys_menu where id in\n        \u003cforeach collection=\"list\" item=\"menuIds\" open=\"(\" separator=\",\" close=\")\"\u003e\n            #{menuIds}\n        \u003c/foreach\u003e\n    \u003c/select\u003e\n\n\n    \u003cselect id=\"findMenuListByPage\" resultType=\"com.bdqn.entity.Menu\"\u003e\n        select * from sys_menu\n        \u003cwhere\u003e\n            \u003cif test=\"id!=null\"\u003e\n                and id = #{id} or pid = #{id}\n            \u003c/if\u003e\n        \u003c/where\u003e\n        order by id\n    \u003c/select\u003e\n\n    \u003cinsert id=\"addMenu\"\u003e\n        insert into sys_menu (pid,title,href,spread,target,icon)\n        values(#{pid},#{title},#{href},#{spread},#{target},#{icon})\n    \u003c/insert\u003e\n\n    \u003cupdate id=\"updateMenu\"\u003e\n        update sys_menu\n        \u003cset\u003e\n            \u003cif test=\"pid!=null\"\u003e\n                pid = #{pid},\n            \u003c/if\u003e\n            \u003cif test=\"spread!=null\"\u003e\n                spread = #{spread},\n            \u003c/if\u003e\n            \u003cif test=\"title!=null and title!=''\"\u003e\n                title = #{title},\n            \u003c/if\u003e\n            \u003cif test=\"href!=null and href!=''\"\u003e\n                href = #{href},\n            \u003c/if\u003e\n            \u003cif test=\"target!=null and target!=''\"\u003e\n                target = #{target},\n            \u003c/if\u003e\n            \u003cif test=\"icon!=null and icon!=''\"\u003e\n                icon = #{icon},\n            \u003c/if\u003e\n        \u003c/set\u003e\n        where id = #{id}\n    \u003c/update\u003e\n\n    \u003cdelete id=\"deleteById\"\u003e\n        delete from sys_menu where id = #{id}\n    \u003c/delete\u003e\n\n    \u003cselect id=\"getMenuCountByMenuId\" resultType=\"int\"\u003e\n        select count(1) from sys_menu where pid = #{id}\n    \u003c/select\u003e\n\n    \u003cselect id=\"findMenuListByEmployeeId\" resultType=\"com.bdqn.entity.Menu\"\u003e\n        select distinct t1.* from sys_menu t1\n        inner join sys_role_menu t2 on t2.`mid` = t1.`id`\n        inner join sys_role_employee t3 on t3.`rid` = t2.`rid`\n        where t3.`eid` = #{employeeId}\n    \u003c/select\u003e\n\n\n\u003c/mapper\u003e\n",
    "original_code": "\u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e\n\u003c!DOCTYPE mapper\n        PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"\u003e\n\u003cmapper namespace=\"com.bdqn.dao.MenuMapper\"\u003e\n\n    \u003c!-- 查询所有菜单列表 --\u003e\n    \u003cselect id=\"findMenuList\" resultType=\"com.bdqn.entity.Menu\"\u003e\n        select * from sys_menu\n    \u003c/select\u003e\n\n\n    \u003cselect id=\"findMenuIdListByRoleId\" resultType=\"int\"\u003e\n        select mid from sys_role_menu where rid = #{roleId}\n    \u003c/select\u003e\n\n    \u003cselect id=\"findMenuByMenuId\" resultType=\"com.bdqn.entity.Menu\"\u003e\n        select * from sys_menu where id in\n        \u003cforeach collection=\"list\" item=\"menuIds\" open=\"(\" separator=\",\" close=\")\"\u003e\n            #{menuIds}\n        \u003c/foreach\u003e\n    \u003c/select\u003e\n\n\n    \u003cselect id=\"findMenuListByPage\" resultType=\"com.bdqn.entity.Menu\"\u003e\n        select * from sys_menu\n        \u003cwhere\u003e\n            \u003cif test=\"id!=null\"\u003e\n                and id = #{id} or pid = #{id}\n            \u003c/if\u003e\n        \u003c/where\u003e\n        order by id\n    \u003c/select\u003e\n\n    \u003cinsert id=\"addMenu\"\u003e\n        insert into sys_menu (pid,title,href,spread,target,icon)\n        values(#{pid},#{title},#{href},#{spread},#{target},#{icon})\n    \u003c/insert\u003e\n\n    \u003cupdate id=\"updateMenu\"\u003e\n        update sys_menu\n        \u003cset\u003e\n            \u003cif test=\"pid!=null\"\u003e\n                pid = #{pid},\n            \u003c/if\u003e\n            \u003cif test=\"spread!=null\"\u003e\n                spread = #{spread},\n            \u003c/if\u003e\n            \u003cif test=\"title!=null and title!=''\"\u003e\n                title = #{title},\n            \u003c/if\u003e\n            \u003cif test=\"href!=null and href!=''\"\u003e\n                href = #{href},\n            \u003c/if\u003e\n            \u003cif test=\"target!=null and target!=''\"\u003e\n                target = #{target},\n            \u003c/if\u003e\n            \u003cif test=\"icon!=null and icon!=''\"\u003e\n                icon = #{icon},\n            \u003c/if\u003e\n        \u003c/set\u003e\n        where id = #{id}\n    \u003c/update\u003e\n\n    \u003cdelete id=\"deleteById\"\u003e\n        delete from sys_menu where id = #{id}\n    \u003c/delete\u003e\n\n    \u003cselect id=\"getMenuCountByMenuId\" resultType=\"int\"\u003e\n        select count(1) from sys_menu where pid = #{id}\n    \u003c/select\u003e\n\n    \u003cselect id=\"findMenuListByEmployeeId\" resultType=\"com.bdqn.entity.Menu\"\u003e\n        select distinct t1.* from sys_menu t1\n        inner join sys_role_menu t2 on t2.`mid` = t1.`id`\n        inner join sys_role_employee t3 on t3.`rid` = t2.`rid`\n        where t3.`eid` = #{employeeId}\n    \u003c/select\u003e\n\n\n\u003c/mapper\u003e\n",
    "path": "src/main/resources/mapper/MenuMapper.xml",
    "model_usage_metrics": {
        "Duration": 1131976121,
        "OpenAiUsage": {
            "completion_tokens": 0,
            "prompt_tokens": 0,
            "total_tokens": 0,
            "completion_tokens_details": {
                "accepted_prediction_tokens": 0,
                "audio_tokens": 0,
                "reasoning_tokens": 0,
                "rejected_prediction_tokens": 0
            },
            "prompt_tokens_details": {
                "audio_tokens": 0,
                "cached_tokens": 0
            }
        }
    }
}