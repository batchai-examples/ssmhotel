{
    "has_issue": false,
    "overall_severity": "",
    "issues": [],
    "fixed_code": "\u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e\n\u003c!DOCTYPE mapper\n        PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"\u003e\n\u003cmapper namespace=\"com.bdqn.dao.CheckinMapper\"\u003e\n\n    \u003cresultMap id=\"BaseResultMap\" type=\"com.bdqn.entity.Checkin\"\u003e\n        \u003cid column=\"id\" jdbcType=\"BIGINT\" property=\"id\" /\u003e\n        \u003cresult column=\"roomTypeId\" jdbcType=\"INTEGER\" property=\"roomtypeid\" /\u003e\n        \u003cresult column=\"roomId\" jdbcType=\"BIGINT\" property=\"roomid\" /\u003e\n        \u003cresult column=\"customerName\" jdbcType=\"VARCHAR\" property=\"customername\" /\u003e\n        \u003cresult column=\"idCard\" jdbcType=\"VARCHAR\" property=\"idcard\" /\u003e\n        \u003cresult column=\"phone\" jdbcType=\"VARCHAR\" property=\"phone\" /\u003e\n        \u003cresult column=\"arriveDate\" jdbcType=\"TIMESTAMP\" property=\"arrivedate\" /\u003e\n        \u003cresult column=\"leaveDate\" jdbcType=\"TIMESTAMP\" property=\"leavedate\" /\u003e\n        \u003cresult column=\"payPrice\" jdbcType=\"DECIMAL\" property=\"payprice\" /\u003e\n        \u003cresult column=\"status\" jdbcType=\"INTEGER\" property=\"status\" /\u003e\n        \u003cresult column=\"remark\" jdbcType=\"VARCHAR\" property=\"remark\" /\u003e\n    \u003c/resultMap\u003e\n\n    \u003cresultMap id=\"checkInRoomAndTypeResultMap\" type=\"com.bdqn.entity.Checkin\" extends=\"BaseResultMap\"\u003e\n        \u003c!-- 配置订单与房间关系 --\u003e\n        \u003cassociation property=\"room\" javaType=\"com.bdqn.entity.Room\"\u003e\n            \u003cid column=\"id\" property=\"id\"/\u003e\n            \u003cresult property=\"roomnum\" column=\"roomnum\"/\u003e\n        \u003c/association\u003e\n        \u003c!-- 配置订单与房型关系 --\u003e\n        \u003cassociation property=\"roomType\" javaType=\"com.bdqn.entity.RoomType\"\u003e\n            \u003cid property=\"id\" column=\"id\"/\u003e\n            \u003cresult property=\"typename\" column=\"typename\"/\u003e\n        \u003c/association\u003e\n    \u003c/resultMap\u003e\n\n    \u003cselect id=\"findCheckinList\" resultMap=\"checkInRoomAndTypeResultMap\"\u003e\n        select t1.*,t2.roomnum,t3.`typeName` from t_checkin t1\n        inner join t_room t2 on t2.id = t1.`roomId`\n        inner join t_room_type t3 on t3.id = t2.`roomTypeId`\n        \u003cwhere\u003e\n            \u003cif test=\"customername!=null and customername!=''\"\u003e\n                and t1.customername like concat('%',#{customername},'%')\n            \u003c/if\u003e\n            \u003cif test=\"idcard!=null and idcard!=''\"\u003e\n                and t1.idcard like concat('%',#{idcard},'%')\n            \u003c/if\u003e\n            \u003cif test=\"phone!=null and phone!=''\"\u003e\n                and t1.phone like concat('%',#{phone},'%')\n            \u003c/if\u003e\n            \u003cif test=\"roomtypeid!=null\"\u003e\n                and t1.roomtypeid = #{roomtypeid}\n            \u003c/if\u003e\n            \u003cif test=\"status!=null\"\u003e\n                and t1.status = #{status}\n            \u003c/if\u003e\n            \u003cif test=\"arrivedate!=null\"\u003e\n                \u003c![CDATA[and t1.arrivedate \u003e= #{arrivedate}]]\u003e\n            \u003c/if\u003e\n            \u003cif test=\"leavedate!=null\"\u003e\n                \u003c![CDATA[and t1.leavedate \u003c= #{leavedate}]]\u003e\n            \u003c/if\u003e\n        \u003c/where\u003e\n    \u003c/select\u003e\n\n    \u003cinsert id=\"addCheckin\"\u003e\n        insert into t_checkin (roomtypeid,roomid,customername,idcard,phone,arrivedate,leavedate,payprice,status,remark,ordersid,createDate,createdBy)\n        values (#{roomtypeid},#{roomid},#{customername},#{idcard},#{phone},#{arrivedate},#{leavedate},#{payprice},#{status},#{remark},#{ordersid},#{createdate},#{createdby})\n    \u003c/insert\u003e\n\n    \u003cupdate id=\"updateCheckin\"\u003e\n        update t_checkin\n        \u003cset\u003e\n            \u003cif test=\"roomtypeid != null\"\u003e\n                roomTypeId = #{roomtypeid,jdbcType=INTEGER},\n            \u003c/if\u003e\n            \u003cif test=\"roomid != null\"\u003e\n                roomId = #{roomid,jdbcType=BIGINT},\n            \u003c/if\u003e\n            \u003cif test=\"customername != null\"\u003e\n                customerName = #{customername,jdbcType=VARCHAR},\n            \u003c/if\u003e\n            \u003cif test=\"idcard != null\"\u003e\n                idCard = #{idcard,jdbcType=VARCHAR},\n            \u003c/if\u003e\n            \u003cif test=\"phone != null\"\u003e\n                phone = #{phone,jdbcType=VARCHAR},\n            \u003c/if\u003e\n            \u003cif test=\"arrivedate != null\"\u003e\n                arriveDate = #{arrivedate,jdbcType=TIMESTAMP},\n            \u003c/if\u003e\n            \u003cif test=\"leavedate != null\"\u003e\n                leaveDate = #{leavedate,jdbcType=TIMESTAMP},\n            \u003c/if\u003e\n            \u003cif test=\"payprice != null\"\u003e\n                payPrice = #{payprice,jdbcType=DECIMAL},\n            \u003c/if\u003e\n            \u003cif test=\"status != null\"\u003e\n                status = #{status,jdbcType=INTEGER},\n            \u003c/if\u003e\n            \u003cif test=\"remark != null\"\u003e\n                remark = #{remark,jdbcType=VARCHAR},\n            \u003c/if\u003e\n        \u003c/set\u003e\n        where id = #{id,jdbcType=BIGINT}\n    \u003c/update\u003e\n\n\u003c/mapper\u003e\n",
    "original_code": "\u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e\n\u003c!DOCTYPE mapper\n        PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"\u003e\n\u003cmapper namespace=\"com.bdqn.dao.CheckinMapper\"\u003e\n\n    \u003cresultMap id=\"BaseResultMap\" type=\"com.bdqn.entity.Checkin\"\u003e\n        \u003cid column=\"id\" jdbcType=\"BIGINT\" property=\"id\" /\u003e\n        \u003cresult column=\"roomTypeId\" jdbcType=\"INTEGER\" property=\"roomtypeid\" /\u003e\n        \u003cresult column=\"roomId\" jdbcType=\"BIGINT\" property=\"roomid\" /\u003e\n        \u003cresult column=\"customerName\" jdbcType=\"VARCHAR\" property=\"customername\" /\u003e\n        \u003cresult column=\"idCard\" jdbcType=\"VARCHAR\" property=\"idcard\" /\u003e\n        \u003cresult column=\"phone\" jdbcType=\"VARCHAR\" property=\"phone\" /\u003e\n        \u003cresult column=\"arriveDate\" jdbcType=\"TIMESTAMP\" property=\"arrivedate\" /\u003e\n        \u003cresult column=\"leaveDate\" jdbcType=\"TIMESTAMP\" property=\"leavedate\" /\u003e\n        \u003cresult column=\"payPrice\" jdbcType=\"DECIMAL\" property=\"payprice\" /\u003e\n        \u003cresult column=\"status\" jdbcType=\"INTEGER\" property=\"status\" /\u003e\n        \u003cresult column=\"remark\" jdbcType=\"VARCHAR\" property=\"remark\" /\u003e\n    \u003c/resultMap\u003e\n\n    \u003cresultMap id=\"checkInRoomAndTypeResultMap\" type=\"com.bdqn.entity.Checkin\" extends=\"BaseResultMap\"\u003e\n        \u003c!-- 配置订单与房间关系 --\u003e\n        \u003cassociation property=\"room\" javaType=\"com.bdqn.entity.Room\"\u003e\n            \u003cid column=\"id\" property=\"id\"/\u003e\n            \u003cresult property=\"roomnum\" column=\"roomnum\"/\u003e\n        \u003c/association\u003e\n        \u003c!-- 配置订单与房型关系 --\u003e\n        \u003cassociation property=\"roomType\" javaType=\"com.bdqn.entity.RoomType\"\u003e\n            \u003cid property=\"id\" column=\"id\"/\u003e\n            \u003cresult property=\"typename\" column=\"typename\"/\u003e\n        \u003c/association\u003e\n    \u003c/resultMap\u003e\n\n    \u003cselect id=\"findCheckinList\" resultMap=\"checkInRoomAndTypeResultMap\"\u003e\n        select t1.*,t2.roomnum,t3.`typeName` from t_checkin t1\n        inner join t_room t2 on t2.id = t1.`roomId`\n        inner join t_room_type t3 on t3.id = t2.`roomTypeId`\n        \u003cwhere\u003e\n            \u003cif test=\"customername!=null and customername!=''\"\u003e\n                and t1.customername like concat('%',#{customername},'%')\n            \u003c/if\u003e\n            \u003cif test=\"idcard!=null and idcard!=''\"\u003e\n                and t1.idcard like concat('%',#{idcard},'%')\n            \u003c/if\u003e\n            \u003cif test=\"phone!=null and phone!=''\"\u003e\n                and t1.phone like concat('%',#{phone},'%')\n            \u003c/if\u003e\n            \u003cif test=\"roomtypeid!=null\"\u003e\n                and t1.roomtypeid = #{roomtypeid}\n            \u003c/if\u003e\n            \u003cif test=\"status!=null\"\u003e\n                and t1.status = #{status}\n            \u003c/if\u003e\n            \u003cif test=\"arrivedate!=null\"\u003e\n                \u003c![CDATA[and t1.arrivedate \u003e= #{arrivedate}]]\u003e\n            \u003c/if\u003e\n            \u003cif test=\"leavedate!=null\"\u003e\n                \u003c![CDATA[and t1.leavedate \u003c= #{leavedate}]]\u003e\n            \u003c/if\u003e\n        \u003c/where\u003e\n    \u003c/select\u003e\n\n    \u003cinsert id=\"addCheckin\"\u003e\n        insert into t_checkin (roomtypeid,roomid,customername,idcard,phone,arrivedate,leavedate,payprice,status,remark,ordersid,createDate,createdBy)\n        values (#{roomtypeid},#{roomid},#{customername},#{idcard},#{phone},#{arrivedate},#{leavedate},#{payprice},#{status},#{remark},#{ordersid},#{createdate},#{createdby})\n    \u003c/insert\u003e\n\n    \u003cupdate id=\"updateCheckin\"\u003e\n        update t_checkin\n        \u003cset\u003e\n            \u003cif test=\"roomtypeid != null\"\u003e\n                roomTypeId = #{roomtypeid,jdbcType=INTEGER},\n            \u003c/if\u003e\n            \u003cif test=\"roomid != null\"\u003e\n                roomId = #{roomid,jdbcType=BIGINT},\n            \u003c/if\u003e\n            \u003cif test=\"customername != null\"\u003e\n                customerName = #{customername,jdbcType=VARCHAR},\n            \u003c/if\u003e\n            \u003cif test=\"idcard != null\"\u003e\n                idCard = #{idcard,jdbcType=VARCHAR},\n            \u003c/if\u003e\n            \u003cif test=\"phone != null\"\u003e\n                phone = #{phone,jdbcType=VARCHAR},\n            \u003c/if\u003e\n            \u003cif test=\"arrivedate != null\"\u003e\n                arriveDate = #{arrivedate,jdbcType=TIMESTAMP},\n            \u003c/if\u003e\n            \u003cif test=\"leavedate != null\"\u003e\n                leaveDate = #{leavedate,jdbcType=TIMESTAMP},\n            \u003c/if\u003e\n            \u003cif test=\"payprice != null\"\u003e\n                payPrice = #{payprice,jdbcType=DECIMAL},\n            \u003c/if\u003e\n            \u003cif test=\"status != null\"\u003e\n                status = #{status,jdbcType=INTEGER},\n            \u003c/if\u003e\n            \u003cif test=\"remark != null\"\u003e\n                remark = #{remark,jdbcType=VARCHAR},\n            \u003c/if\u003e\n        \u003c/set\u003e\n        where id = #{id,jdbcType=BIGINT}\n    \u003c/update\u003e\n\n\u003c/mapper\u003e\n",
    "path": "target/ssm_hotel-1.0-SNAPSHOT/WEB-INF/classes/mapper/CheckinMapper.xml",
    "model_usage_metrics": {
        "Duration": 1156302301,
        "OpenAiUsage": {
            "completion_tokens": 0,
            "prompt_tokens": 0,
            "total_tokens": 0,
            "completion_tokens_details": {
                "accepted_prediction_tokens": 0,
                "audio_tokens": 0,
                "reasoning_tokens": 0,
                "rejected_prediction_tokens": 0
            },
            "prompt_tokens_details": {
                "audio_tokens": 0,
                "cached_tokens": 0
            }
        }
    }
}